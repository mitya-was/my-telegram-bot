#!/bin/bash

# ะกะบัะธะฟั ะดะปั ะดะตะฟะปะพั ะฑะพัะฐ ะฝะฐ ัะตัะฒะตั
echo "๐ ะะพัะฐัะพะบ ะดะตะฟะปะพั Contract Bot..."

# ะกัะฒะพัััะผะพ ะฟะฐะฟะบะธ ะดะปั ะปะพะณัะฒ
mkdir -p logs

# ะััะฐะฝะพะฒะปััะผะพ ะทะฐะปะตะถะฝะพััั
echo "๐ฆ ะััะฐะฝะพะฒะปะตะฝะฝั ะทะฐะปะตะถะฝะพััะตะน..."
npm install

# ะัะฟะธะฝััะผะพ ะฟะพะฟะตัะตะดะฝัะน ะฟัะพัะตั ัะบัะพ ะฒัะฝ ััะฝัั
echo "๐ ะัะฟะธะฝะบะฐ ะฟะพะฟะตัะตะดะฝัะพะณะพ ะฟัะพัะตัั..."
pm2 stop contract-bot 2>/dev/null || true
pm2 delete contract-bot 2>/dev/null || true

# ะะฐะฟััะบะฐัะผะพ ะฑะพัะฐ ัะตัะตะท PM2
echo "๐ค ะะฐะฟััะบ ะฑะพัะฐ ัะตัะตะท PM2..."
pm2 start ecosystem.config.js

# ะะฑะตััะณะฐัะผะพ ะบะพะฝััะณััะฐััั PM2
echo "๐พ ะะฑะตัะตะถะตะฝะฝั ะบะพะฝััะณััะฐััั PM2..."
pm2 save

# ะะพะบะฐะทััะผะพ ััะฐััั
echo "๐ ะกัะฐััั ะฟัะพัะตััะฒ:"
pm2 status

echo "โ ะะตะฟะปะพะน ะทะฐะฒะตััะตะฝะพ!"
echo "๐ ะะพะณะธ: pm2 logs contract-bot"
echo "๐ ะัะฟะธะฝะบะฐ: pm2 stop contract-bot"
echo "๐ ะะตัะตะทะฐะฟััะบ: pm2 restart contract-bot" 